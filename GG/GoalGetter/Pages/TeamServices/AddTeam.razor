@page "/project/{ProId:int}/team/addteam"
@inject IViewPeopleIfNotInTeamUseCase viewPeopleIfNotInTeamUseCase
@inject IAddTeamUseCase addTeamUseCase

<MudCard>
	<MudSelect Label="Persons" MultiSelection="true" @bind-SelectedValues="@options">
		@if(people != null)
		{
			foreach (Person person in people)
			{
				<MudSelectItem T="Person" Value="@person">@person.Firstname</MudSelectItem>
			}
		}

	</MudSelect>
	<MudCardActions>
		<MudButton ButtonType="ButtonType.Submit" class="btn btn-primary" @onclick="Save">Save</MudButton>
		<MudButton ButtonType="ButtonType.Button" class="btn btn-primary" >Cancel</MudButton>
	</MudCardActions>
</MudCard>




@code {

	[Parameter]
	public int ProId { get; set; }

	private IEnumerable<Person> people = new List<Person>();

	private IEnumerable<Person> options { get; set; } = new List<Person>();

	protected override async Task OnInitializedAsync()
	{
		people = await viewPeopleIfNotInTeamUseCase.ExecuteAsync(ProId);
	}

	private void Save()
	{
		foreach (Person p in options)
		{
			
			addTeamUseCase.ExecuteAsync(new Teammember{person = p, Role= Teamrolle.Worker}, ProId);
			
		}
	}
}
